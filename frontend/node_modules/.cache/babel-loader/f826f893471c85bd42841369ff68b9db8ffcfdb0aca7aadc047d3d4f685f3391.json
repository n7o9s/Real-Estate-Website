{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{useContext}from'react';import AuthContext from'../context/AuthContext';import\"../styles/ListProperty.css\";import PopupMessage from\"../components/PopupMessage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"http://localhost:5001/api/properties\";const ListProperty=()=>{const{user}=useContext(AuthContext);const navigate=useNavigate();const[loading,setLoading]=useState(false);const[message,setMessage]=useState(\"\");const[popup,setPopup]=useState({visible:false,message:\"\",type:\"\"});const[formData,setFormData]=useState({title:\"\",description:\"\",price:\"\",location:\"\",bedrooms:\"\",bathrooms:\"\",type:\"\"});// redirect if the user is NOT logged in or not a seller\nuseEffect(()=>{if(!user){alert(\"‚ùå You must be logged in to list a property!\");navigate(\"/login\");}else if(user.role!==\"seller\"){alert(\"‚ùå Only sellers can list properties!\");navigate(\"/\");}},[user,navigate]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(Object.values(formData).some(value=>value===\"\")){setMessage(\"‚ùå Please fill in all fields.\");return;}try{setLoading(true);console.log(\"üì° Sending property listing request...\",formData);const response=await axios.post(API_URL,formData,{headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${localStorage.getItem(\"token\")}`}});console.log(\"‚úÖ Property listed successfully!\",response.data);setMessage(\"‚úÖ Property listed successfully!\");setTimeout(()=>{navigate(\"/properties\");window.location.reload();},2000);}catch(error){var _error$response,_error$response2,_error$response2$data;console.error(\"üö® Error listing property:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error);setMessage(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||\"‚ùå Failed to list property.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"list-property-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDFE1 List Your Property\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"alert\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"property-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"Title\",value:formData.title,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description\",value:formData.description,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-fields\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",placeholder:\"Price\",value:formData.price,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",placeholder:\"Location\",value:formData.location,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-fields\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bedrooms\",placeholder:\"Bedrooms\",value:formData.bedrooms,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bathrooms\",placeholder:\"Bathrooms\",value:formData.bathrooms,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",className:\"custom-select\",value:formData.type,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"condo\",children:\"Condo\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:loading,children:loading?\"Listing Property...\":\"üöÄ List Property\"})]})]});};export default ListProperty;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useContext","AuthContext","PopupMessage","jsx","_jsx","jsxs","_jsxs","API_URL","ListProperty","user","navigate","loading","setLoading","message","setMessage","popup","setPopup","visible","type","formData","setFormData","title","description","price","location","bedrooms","bathrooms","alert","role","handleChange","e","target","name","value","handleSubmit","preventDefault","Object","values","some","console","log","response","post","headers","Authorization","localStorage","getItem","data","setTimeout","window","reload","error","_error$response","_error$response2","_error$response2$data","className","children","onSubmit","placeholder","onChange","required","disabled"],"sources":["/Users/a79/Downloads/my-real-estate-project/frontend/src/pages/ListProperty.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport \"../styles/ListProperty.css\";\nimport PopupMessage from \"../components/PopupMessage\";\n\n\nconst API_URL = \"http://localhost:5001/api/properties\";\n\nconst ListProperty = () => {\n    const { user } = useContext(AuthContext);\n    const navigate = useNavigate();\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState(\"\");\n    const [popup, setPopup] = useState({ visible: false, message: \"\", type: \"\" });\n\n\n    const [formData, setFormData] = useState({\n        title: \"\",\n        description: \"\",\n        price: \"\",\n        location: \"\",\n        bedrooms: \"\",\n        bathrooms: \"\",\n        type: \"\",\n    });\n\n    // redirect if the user is NOT logged in or not a seller\n    useEffect(() => {\n        if (!user) {\n            alert(\"‚ùå You must be logged in to list a property!\");\n            navigate(\"/login\");\n        } else if (user.role !== \"seller\") {\n            alert(\"‚ùå Only sellers can list properties!\");\n            navigate(\"/\");\n        }\n    }, [user, navigate]);\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (Object.values(formData).some((value) => value === \"\")) {\n            setMessage(\"‚ùå Please fill in all fields.\");\n            return;\n        }\n\n        try {\n            setLoading(true);\n            console.log(\"üì° Sending property listing request...\", formData);\n\n            const response = await axios.post(API_URL, formData, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n                },\n            });\n\n            console.log(\"‚úÖ Property listed successfully!\", response.data);\n\n            setMessage(\"‚úÖ Property listed successfully!\");\n\n            setTimeout(() => {\n                navigate(\"/properties\");\n                window.location.reload();\n            }, 2000);\n\n        } catch (error) {\n            console.error(\"üö® Error listing property:\", error.response?.data || error);\n            setMessage(error.response?.data?.error || \"‚ùå Failed to list property.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"list-property-container\">\n            <h2>üè° List Your Property</h2>\n            {message && <p className=\"alert\">{message}</p>}\n            <form onSubmit={handleSubmit} className=\"property-form\">\n                <input type=\"text\" name=\"title\" placeholder=\"Title\" value={formData.title} onChange={handleChange} required />\n                <textarea name=\"description\" placeholder=\"Description\" value={formData.description} onChange={handleChange} required />\n\n                <div className=\"inline-fields\">\n                    <input type=\"number\" name=\"price\" placeholder=\"Price\" value={formData.price} onChange={handleChange} required />\n                    <input type=\"text\" name=\"location\" placeholder=\"Location\" value={formData.location} onChange={handleChange} required />\n                </div>\n\n                <div className=\"inline-fields\">\n                    <input type=\"number\" name=\"bedrooms\" placeholder=\"Bedrooms\" value={formData.bedrooms} onChange={handleChange} required />\n                    <input type=\"number\" name=\"bathrooms\" placeholder=\"Bathrooms\" value={formData.bathrooms} onChange={handleChange} required />\n                </div>\n\n                <select name=\"type\" className=\"custom-select\" value={formData.type} onChange={handleChange} required>\n                    <option value=\"\">Select Type</option>\n                    <option value=\"apartment\">Apartment</option>\n                    <option value=\"house\">House</option>\n                    <option value=\"condo\">Condo</option>\n                </select>\n\n                <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n                    {loading ? \"Listing Property...\" : \"üöÄ List Property\"}\n                </button>\n\n            </form>\n        </div>\n    );\n};\n\nexport default ListProperty;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}