{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{login}from\"../services/api.js\";import\"../styles/Login.css\";import PopupMessage from\"../components/PopupMessage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[formData,setFormData]=useState({email:\"\",password:\"\"});const[popup,setPopup]=useState({visible:false,message:\"\",type:\"\"});const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{const response=await login(formData);if(response.error){setPopup({visible:true,message:`❌ ${response.error}`,type:\"error\"});}else{localStorage.setItem(\"token\",response.token);setPopup({visible:true,message:\"✅ Logged in successfully!\",type:\"success\"});setTimeout(()=>{setPopup({...popup,visible:false});navigate(\"/\");window.location.reload();},1500);}}catch(error){setPopup({visible:true,message:\"❌ Login failed\",type:\"error\"});setTimeout(()=>setPopup({...popup,visible:false}),3000);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(PopupMessage,{...popup}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-btn\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"switch-auth\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign up\"})]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","login","PopupMessage","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","popup","setPopup","visible","message","type","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","response","error","localStorage","setItem","token","setTimeout","window","location","reload","className","children","onSubmit","placeholder","onChange","required","href"],"sources":["/Users/a79/Downloads/my-real-estate-project/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login } from \"../services/api.js\";\nimport \"../styles/Login.css\";\nimport PopupMessage from \"../components/PopupMessage\";\n\nfunction Login() {\n    const [formData, setFormData] = useState({ email: \"\", password: \"\" });\n    const [popup, setPopup] = useState({ visible: false, message: \"\", type: \"\" });\n    const navigate = useNavigate();\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const response = await login(formData);\n            if (response.error) {\n                setPopup({\n                    visible: true,\n                    message: `❌ ${response.error}`,\n                    type: \"error\",\n                });\n            } else {\n                localStorage.setItem(\"token\", response.token);\n                setPopup({\n                    visible: true,\n                    message: \"✅ Logged in successfully!\",\n                    type: \"success\",\n                });\n                setTimeout(() => {\n                    setPopup({ ...popup, visible: false });\n                    navigate(\"/\");\n                    window.location.reload();\n                }, 1500);\n            }\n        } catch (error) {\n            setPopup({\n                visible: true,\n                message: \"❌ Login failed\",\n                type: \"error\",\n            });\n            setTimeout(() => setPopup({ ...popup, visible: false }), 3000);\n        }\n    };\n\n    return (\n        <div className=\"login-container\">\n            <PopupMessage {...popup} /> {/* popup */}\n            <div className=\"login-box\">\n                <h2>Login</h2>\n                <form onSubmit={handleSubmit}>\n                    <input\n                        type=\"email\"\n                        name=\"email\"\n                        placeholder=\"Email\"\n                        value={formData.email}\n                        onChange={handleChange}\n                        required\n                    />\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        placeholder=\"Password\"\n                        value={formData.password}\n                        onChange={handleChange}\n                        required\n                    />\n                    <button type=\"submit\" className=\"login-btn\">Login</button>\n                </form>\n                <p className=\"switch-auth\">\n                    Don't have an account? <a href=\"/signup\">Sign up</a>\n                </p>\n            </div>\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}